



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
        <meta name="author" content="idealo Data Science Team">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="img/favicon.ico">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Image-dedup</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#ef5350">
      
    
    
      <script src="assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="assets/fonts/material-icons.css">
    
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-137434942-2", "auto")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="red" data-md-color-accent="red">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#imagededup" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="." title="Image-dedup" class="md-header-nav__button md-logo">
          
            <img src="img/logo.svg" width="24" height="24">
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Image-dedup
            </span>
            <span class="md-header-nav__topic">
              Home
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/idealo/image-dedup/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    idealo/image-dedup
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="." title="Image-dedup" class="md-nav__button md-logo">
      
        <img src="img/logo.svg" width="48" height="48">
      
    </a>
    Image-dedup
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/idealo/image-dedup/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    idealo/image-dedup
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Home
      </label>
    
    <a href="." title="Home" class="md-nav__link md-nav__link--active">
      Home
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" title="Table of contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-duplicates" title="Finding duplicates" class="md-nav__link">
    Finding duplicates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find_duplicates" title="find_duplicates" class="md-nav__link">
    find_duplicates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find_duplicates_to_remove" title="find_duplicates_to_remove" class="md-nav__link">
    find_duplicates_to_remove
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_1" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_1" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation" title="Feature generation" class="md-nav__link">
    Feature generation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-generation-for-all-images-in-a-directory" title="Feature generation for all images in a directory" class="md-nav__link">
    Feature generation for all images in a directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations_2" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_2" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation-for-a-single-image" title="Feature generation for a single image" class="md-nav__link">
    Feature generation for a single image
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_2" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_3" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_3" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-of-deduplication-quality" title="Evaluation of deduplication quality" class="md-nav__link">
    Evaluation of deduplication quality
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_3" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_4" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plotting-duplicates-of-an-image" title="Plotting duplicates of an image" class="md-nav__link">
    Plotting duplicates of an image
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_4" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contribute" title="Contribute" class="md-nav__link">
    Contribute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" title="Citation" class="md-nav__link">
    Citation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintainers" title="Maintainers" class="md-nav__link">
    Maintainers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" title="Copyright" class="md-nav__link">
    Copyright
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2" type="checkbox" id="nav-2">
    
    <label class="md-nav__link" for="nav-2">
      Documentation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-2">
        Documentation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-1" type="checkbox" id="nav-2-1">
    
    <label class="md-nav__link" for="nav-2-1">
      Evaluation
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-1">
        Evaluation
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="evaluation/evaluation/" title="Evaluation" class="md-nav__link">
      Evaluation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-2" type="checkbox" id="nav-2-2">
    
    <label class="md-nav__link" for="nav-2-2">
      Methods
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-2">
        Methods
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="methods/cnn/" title="CNN" class="md-nav__link">
      CNN
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="methods/hashing/" title="Hashing" class="md-nav__link">
      Hashing
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-3" type="checkbox" id="nav-2-3">
    
    <label class="md-nav__link" for="nav-2-3">
      Components
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-3">
        Components
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="components/cloud.md" title="Cloud" class="md-nav__link">
      Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="components/dataprep.md" title="Data Preparation" class="md-nav__link">
      Data Preparation
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="components/training.md" title="Training" class="md-nav__link">
      Training
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="components/evaluation.md" title="Evaluation" class="md-nav__link">
      Evaluation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-4" type="checkbox" id="nav-2-4">
    
    <label class="md-nav__link" for="nav-2-4">
      Handlers
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-4">
        Handlers
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="handlers/data_generator.md" title="Data Generator" class="md-nav__link">
      Data Generator
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="handlers/image_classifier.md" title="Image Classifer" class="md-nav__link">
      Image Classifer
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
          
          
          


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-2-5" type="checkbox" id="nav-2-5">
    
    <label class="md-nav__link" for="nav-2-5">
      Scripts
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="2">
      <label class="md-nav__title" for="nav-2-5">
        Scripts
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="scripts/run_cloud.md" title="Run Cloud" class="md-nav__link">
      Run Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="scripts/run_dataprep.md" title="Run Data Prep" class="md-nav__link">
      Run Data Prep
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="scripts/run_training.md" title="Run Training" class="md-nav__link">
      Run Training
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="scripts/run_training_cloud.md" title="Run Training Cloud" class="md-nav__link">
      Run Training Cloud
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="scripts/run_evaluation.md" title="Run Evaluation" class="md-nav__link">
      Run Evaluation
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="CONTRIBUTING/" title="Contribution" class="md-nav__link">
      Contribution
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="LICENSE/" title="License" class="md-nav__link">
      License
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#table-of-contents" title="Table of contents" class="md-nav__link">
    Table of contents
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" title="Installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-started" title="Getting started" class="md-nav__link">
    Getting started
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#finding-duplicates" title="Finding duplicates" class="md-nav__link">
    Finding duplicates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#find_duplicates" title="find_duplicates" class="md-nav__link">
    find_duplicates
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#find_duplicates_to_remove" title="find_duplicates_to_remove" class="md-nav__link">
    find_duplicates_to_remove
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_1" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_1" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_1" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation" title="Feature generation" class="md-nav__link">
    Feature generation
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#feature-generation-for-all-images-in-a-directory" title="Feature generation for all images in a directory" class="md-nav__link">
    Feature generation for all images in a directory
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#considerations_2" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_2" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#feature-generation-for-a-single-image" title="Feature generation for a single image" class="md-nav__link">
    Feature generation for a single image
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_2" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_3" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples_3" title="Examples" class="md-nav__link">
    Examples
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#evaluation-of-deduplication-quality" title="Evaluation of deduplication quality" class="md-nav__link">
    Evaluation of deduplication quality
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_3" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#considerations_4" title="Considerations" class="md-nav__link">
    Considerations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#plotting-duplicates-of-an-image" title="Plotting duplicates of an image" class="md-nav__link">
    Plotting duplicates of an image
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#options_4" title="Options" class="md-nav__link">
    Options
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#contribute" title="Contribute" class="md-nav__link">
    Contribute
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#citation" title="Citation" class="md-nav__link">
    Citation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#maintainers" title="Maintainers" class="md-nav__link">
    Maintainers
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#copyright" title="Copyright" class="md-nav__link">
    Copyright
  </a>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/idealo/image-dedup/edit/master/docs/index.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="imagededup">imagededup</h1>
<p>Finding duplicates in an image dataset is a recurring task. imagededup is a python package that provides functionality
to carry out this task effectively. The deduplication problem generally caters to 2 broad issues:
* Finding exact duplicates</p>
<p align="center">
  <img src="_readme_figures/103500.jpg" width="300" />
  <img src="_readme_figures/103500.jpg" width="300" />
</p>

<ul>
<li>Finding near duplicates</li>
</ul>
<p align="center">
  <img src="_readme_figures/103500.jpg" width="300" />
  <img src="_readme_figures/103501.jpg" width="300" />
</p>

<p>Traditional methods such as hashing algorithms are particularly good at finding exact duplicates while more modern 
methods involving convolutional neural networks are also adept at finding near duplicates due to their ability to 
capture basic contours in images.</p>
<p>This package provides functionality to address both problems. Additionally, an evaluation framework is also provided to
judge the quality of deduplication. Following details the functionality provided by the package:
* Finding duplicates in a directory using one of the following algorithms:
    - <a href="https://arxiv.org/abs/1704.04861">Convolutional Neural Network</a>
    - <a href="http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html">Perceptual hashing</a>
    - <a href="http://www.hackerfactor.com/blog/index.php?/archives/529-Kind-of-Like-That.html">Difference hashing</a>
    - <a href="https://fullstackml.com/wavelet-image-hash-in-python-3504fdd282b5">Wavelet hashing</a>
    - <a href="http://www.hackerfactor.com/blog/index.php?/archives/432-Looks-Like-It.html">Average hashing</a>
* Generation of features for images using one of the above stated algorithms.
* Framework to evaluate effectiveness of deduplication  given a ground truth mapping.
* Plotting duplicates found for a given image file.</p>
<p>imagededup is compatible with Python 3.6 and is distributed under the Apache 2.0 license.</p>
<h2 id="table-of-contents">Table of contents</h2>
<ul>
<li><a href="#installation">Installation</a></li>
<li><a href="#finding-duplicates">Finding duplicates</a></li>
<li><a href="#feature-generation">Feature generation</a></li>
<li><a href="#evaluation-of-deduplication-quality">Evaluation of deduplication</a></li>
<li><a href="#plotting-duplicates-of-an-image">Plotting duplicates</a></li>
<li><a href="#contribute">Contribute</a></li>
<li><a href="#citation">Citation</a></li>
<li><a href="#maintainers">Maintainers</a></li>
<li><a href="#copyright">License</a></li>
</ul>
<h2 id="installation">Installation</h2>
<p>There are two ways to install imagededup:</p>
<p>Install imagededup from PyPI (recommended):</p>
<p><code>pip install imagededup</code></p>
<p>Install imagededup from the GitHub source:</p>
<div class="codehilite"><pre><span></span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">idealo</span><span class="o">/</span><span class="n">image</span><span class="o">-</span><span class="n">dedup</span><span class="p">.</span><span class="n">git</span>
<span class="n">cd</span> <span class="n">image</span><span class="o">-</span><span class="n">dedup</span>  
<span class="n">python</span> <span class="n">setup</span><span class="p">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>


<h2 id="getting-started">Getting started</h2>
<h3 id="finding-duplicates">Finding duplicates</h3>
<p>There are two methods available to perform deduplication:
- <a href="#find_duplicates">find_duplicates()</a>
- <a href="#find_duplicates_to_remove">find_duplicates_to_remove()</a></p>
<h4 id="find_duplicates">find_duplicates</h4>
<p>To deduplicate an image directory, the general api is:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">method_object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">method_object</span><span class="o">.</span><span class="n">find_duplicates</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span>
                                           <span class="o">&lt;</span><span class="n">threshold</span><span class="o">-</span><span class="n">parameter</span><span class="o">-</span><span class="n">value</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>where the returned variable <em>duplicates</em> is a dictionary with the following content:</p>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;image1.jpg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;image1_duplicate1.jpg&#39;</span><span class="p">,</span>
                <span class="s1">&#39;image1_duplicate2.jpg&#39;</span><span class="p">],</span>
  <span class="s1">&#39;image2.jpg&#39;</span><span class="p">:</span> <span class="p">[..],</span>
  <span class="p">..</span>
<span class="err">}</span>
</pre></div>


<p>Each key in the <em>duplicates</em> dictionary corresponds to a file in the image directory passed to the <em>image_dir</em> parameter
of the <em>find_duplicates</em> function. The value is a list of all file names in the image directory that were found to be 
duplicates for the key file.</p>
<h5 id="options">Options</h5>
<ul>
<li>
<p><em>image_dir</em>: Optional, directory where all image files are present.</p>
</li>
<li>
<p><em>encoding_map</em>: Optional, used instead of <em>image_dir</em> attribute. Set it equal to the dictionary of file names and 
corresponding features (hashes/cnn encodings). The mentioned dictionary can be generated using the corresponding 
<a href="#feature-generation-for-all-images-in-a-directory"><em>encode_images</em></a> method.</p>
</li>
<li><em>scores</em>: Setting it to <em>True</em> returns the scores representing the hamming distance (for hashing) or cosine similarity
 (for cnn) of each of the duplicate file names from the key file. In this case, the returned 'duplicates' dictionary has
  the following content:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;image1.jpg&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;image1_duplicate1.jpg&#39;</span><span class="p">,</span> <span class="n">score</span><span class="p">),</span>
                 <span class="p">(</span><span class="s1">&#39;image1_duplicate2.jpg&#39;</span><span class="p">,</span> <span class="n">score</span><span class="p">)],</span>
  <span class="s1">&#39;image2.jpg&#39;</span><span class="p">:</span> <span class="p">[..],</span>
  <span class="p">..</span>
<span class="err">}</span>
</pre></div>


<p>Each key in the <em>duplicates</em> dictionary corresponds to a file in the image directory passed to the image_dir parameter 
of the find_duplicates function. The value is a list of all tuples representing the file names and corresponding scores 
in the image directory that were found to be duplicates for the key file.</p>
<ul>
<li>
<p><em>outfile</em>: Name of file to which the returned duplicates dictionary is to be written. <em>None</em> by default.</p>
</li>
<li>
<p>threshold parameter:</p>
</li>
<li>
<p><em>min_similarity_threshold</em> for cnn method indicating the minimum amount of cosine similarity that should exist 
  between the key image and a candidate image so that the candidate image can be considered as a duplicate for the key 
  image. Should be a float between -1.0 and 1.0. Default value is 0.9.</p>
</li>
<li>
<p><em>max_distance_threshold</em> for hashing methods indicating the maximum amount of hamming distance that can exist 
  between the key image and a candidate image so that the candidate image can be considered as a duplicate for the key 
  image. Should be an int between 0 and 64. Default value is 10.</p>
</li>
</ul>
<h5 id="considerations">Considerations</h5>
<ul>
<li>The returned duplicates dictionary contains symmetric relationships i.e., if an image <em>i</em> is a duplicate of image <em>j</em>,
 then image <em>j</em> must also be a duplicate of image <em>i</em>. Let's say that the image directory only consists of images <em>i</em> 
 and <em>j</em>, then the duplicates dictionary would have the following content:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;i&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;j&#39;</span><span class="p">],</span>
  <span class="s1">&#39;j&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;i&#39;</span><span class="p">]</span>
<span class="err">}</span>
</pre></div>


<ul>
<li>If an image in the image directory can't be loaded, no features are generated for the image. Hence, the image is 
disregarded for deduplication and has no entry in the returned <em>duplicates</em> dictionary.</li>
</ul>
<h5 id="examples">Examples</h5>
<p>To deduplicate an image directory using perceptual hashing, with a maximum allowed hamming distance of 12, scores 
returned along with duplicate filenames and the returned dictionary saved to file 'my_duplicates.json', use the 
following:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">PHash</span>
<span class="n">phasher</span> <span class="o">=</span> <span class="n">PHash</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">phasher</span><span class="o">.</span><span class="n">find_duplicates</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span>
                                     <span class="n">max_distance_threshold</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> 
                                     <span class="n">scores</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> 
                                     <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;my_duplicates.json&#39;</span><span class="p">)</span>
</pre></div>


<p>To deduplicate an image directory using cnn, with a minimum cosine similarity of 0.85, no scores returned and the 
returned dictionary saved to file 'my_duplicates.json', use the following:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">CNN</span>
<span class="n">cnn_encoder</span> <span class="o">=</span> <span class="n">CNN</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">cnn_encoder</span><span class="o">.</span><span class="n">find_duplicates</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span> 
                                         <span class="n">min_similarity_threshold</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span> 
                                         <span class="n">scores</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
                                         <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;my_duplicates.json&#39;</span><span class="p">)</span>
</pre></div>


<h4 id="find_duplicates_to_remove">find_duplicates_to_remove</h4>
<p>Returns a list of files in the image directory that are considered as duplicates. Does <strong>NOT</strong> remove the said files.</p>
<p>The api is similar to <em>find_duplicates</em> function (except the <em>score</em> attribute in <em>find_duplicates</em>). This function 
allows the return of a single list of file names in directory that are found to be duplicates.
The general api for the method is as below:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">method_object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">method_object</span><span class="o">.</span><span class="n">find_duplicates_to_remove</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span> 
                                                     <span class="o">&lt;</span><span class="n">threshold</span><span class="o">-</span><span class="n">parameter</span><span class="o">-</span><span class="n">value</span><span class="o">&gt;</span><span class="p">)</span>
</pre></div>


<p>In this case, the returned variable <em>duplicates</em> is a list containing the name of image files that are found to be 
duplicates of some file in the directory:</p>
<div class="codehilite"><pre><span></span><span class="p">[</span>
  <span class="s1">&#39;image1_duplicate1.jpg&#39;</span><span class="p">,</span>
  <span class="s1">&#39;image1_duplicate2.jpg&#39;</span>
  <span class="p">,..</span>
<span class="p">]</span>
</pre></div>


<h5 id="options_1">Options</h5>
<ul>
<li>
<p><em>image_dir</em>: Optional, directory where all image files are present.</p>
</li>
<li>
<p><em>encoding_map</em>: Optional, used instead of image_dir attribute. Set it equal to the dictionary of file names and 
corresponding features (hashes/cnn encodings). The mentioned dictionary can be generated using the corresponding 
<a href="#feature-generation-for-all-images-in-a-directory"><em>encode_images</em></a> method. Each key in the 'duplicates' dictionary corresponds to a file in the image directory passed to 
the image_dir parameter of the find_duplicates function. The value is a list of all tuples representing the file names 
and corresponding scores in the image directory that were found to be duplicates for the key file.</p>
</li>
<li>
<p><em>outfile</em>: Name of file to which the returned duplicates dictionary is to be written. <em>None</em> by default.</p>
</li>
<li>
<p>threshold parameter:</p>
</li>
<li>
<p><em>min_similarity_threshold</em> for cnn method indicating the minimum amount of cosine similarity that should exist 
  between the key image and a candidate image so that the candidate image can be considered as a duplicate for the key 
  image. Should be a float between -1.0 and 1.0. Default value is 0.9.</p>
</li>
<li>
<p><em>max_distance_threshold</em> for hashing methods indicating the maximum amount of hamming distance that can exist 
  between the key image and a candidate image so that the candidate image can be considered as a duplicate for the key 
  image. Should be an int between 0 and 64. Default value is 10.</p>
</li>
</ul>
<h5 id="considerations_1">Considerations</h5>
<ul>
<li>This method must be used with caution. The symmetric nature of duplicates imposes an issue of marking one image as 
duplicate and the other as original. Consider the following <em>duplicates</em> dictionary:</li>
</ul>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;1.jpg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2.jpg&#39;</span><span class="p">],</span>
  <span class="s1">&#39;2.jpg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;1.jpg&#39;</span><span class="p">,</span> <span class="s1">&#39;3.jpg&#39;</span><span class="p">],</span>
  <span class="s1">&#39;3.jpg&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;2.jpg&#39;</span><span class="p">]</span>
<span class="err">}</span>
</pre></div>


<p>In this case, it is possible to remove only <em>2.jpg</em> which leaves <em>1.jpg</em> and <em>3.jpg</em> as non-duplicates of each other. 
However, it is also possible to remove both <em>1.jpg</em> and <em>3.jpg</em> leaving only <em>2.jpg</em>. The <em>find_duplicates_to_remove</em> 
method makes this decision based on the alphabetical sorting of filenames in the directory. In the above example, the 
filename <em>1.jpg</em> appears alphabetically before <em>2.jpg</em>. So, <em>1.jpg</em> would be retained, while its duplicate, <em>2.jpg</em>, 
would be marked as a duplicate. Once <em>2.jpg</em> is marked as duplicate, its own found duplicates would be disregarded. 
Thus, <em>1.jpg</em> and <em>3.jpg</em> would not be considered as duplicates. So, the final return would be:</p>
<div class="codehilite"><pre><span></span><span class="p">[</span><span class="s1">&#39;2.jpg&#39;</span><span class="p">]</span>
</pre></div>


<p>This leaves <em>1.jpg</em> and <em>3.jpg</em> as non-duplicates in the directory.
If the user does not wish to impose this heuristic, it is advised to use <a href="#find_duplicates"><em>find_duplicates</em></a> function and use a custom 
heuristic to mark a file as duplicate.</p>
<ul>
<li>If an image in the image directory can't be loaded, no features are generated for the image. Hence, the image is 
disregarded for deduplication and has no entry in the returned <em>duplicates</em> dictionary.</li>
</ul>
<h5 id="examples_1">Examples</h5>
<p>To deduplicate an image directory using perceptual hashing, with a maximum allowed hamming distance of 12, and the 
returned list saved to file 'my_duplicates.json', use the following:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">PHash</span>
<span class="n">phasher</span> <span class="o">=</span> <span class="n">PHash</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">phasher</span><span class="o">.</span><span class="n">find_duplicates_to_remove</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span> 
                                               <span class="n">max_distance_threshold</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> 
                                               <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;my_duplicates.json&#39;</span><span class="p">)</span>
</pre></div>


<p>To deduplicate an image directory using cnn, with a minimum cosine similarity of 0.85 and the returned list saved to 
file 'my_duplicates.json', use the following:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">CNN</span>
<span class="n">cnn_encoder</span> <span class="o">=</span> <span class="n">CNN</span><span class="p">()</span>
<span class="n">duplicates</span> <span class="o">=</span> <span class="n">cnn_encoder</span><span class="o">.</span><span class="n">find_duplicates_to_remove</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">,</span> 
                                                   <span class="n">min_similarity_threshold</span><span class="o">=</span><span class="mf">0.85</span><span class="p">,</span> 
                                                   <span class="n">outfile</span><span class="o">=</span><span class="s1">&#39;my_duplicates.json&#39;</span><span class="p">)</span>
</pre></div>


<h3 id="feature-generation">Feature generation</h3>
<p>It might be desirable to only generate the hashes/cnn encodings for a given image or all images in the directory instead
 of directly deduplicating using find_duplicates method. Features can be generated for a directory of images or for a single 
 image:
- <a href="#feature-generation-for-all-images-in-a-directory">Feature generation for all images in a directory</a>
- <a href="#feature-generation-for-a-single-image">Feature generation for a single image</a></p>
<h4 id="feature-generation-for-all-images-in-a-directory">Feature generation for all images in a directory</h4>
<p>To generate encodings for all images in an image directory <em>encode_images</em> function can be used. The general api for 
using <em>encode_images</em> is:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">method_object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">()</span>
<span class="n">encodings</span> <span class="o">=</span> <span class="n">method_object</span><span class="o">.</span><span class="n">encode_images</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">)</span>
</pre></div>


<p>where the returned variable <em>encodings</em> is a dictionary mapping image file names to corresponding encoding:</p>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;image1.jpg&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">feature</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="mi">1</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;image2.jpg&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">feature</span><span class="o">-</span><span class="n">image</span><span class="o">-</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span>
   <span class="p">..</span>
<span class="err">}</span>
</pre></div>


<p>For hashing algorithms, the features are 64 bit hashes represented as 16 character hexadecimal strings.</p>
<p>For cnn, the features are numpy array with shape (1, 1024).</p>
<h5 id="considerations_2">Considerations</h5>
<p>If an image in the image directory can't be loaded, no features are generated for the image. Hence, there is no entry 
for the image in the returned encodings dictionary.</p>
<h5 id="examples_2">Examples</h5>
<p>Generating features using Difference hash,</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">DHash</span>
<span class="n">dhasher</span> <span class="o">=</span> <span class="n">DHash</span><span class="p">()</span>
<span class="n">encodings</span> <span class="o">=</span> <span class="n">dhasher</span><span class="o">.</span><span class="n">encode_images</span><span class="p">(</span><span class="n">image_dir</span><span class="o">=</span><span class="s1">&#39;path/to/image/directory&#39;</span><span class="p">)</span>
</pre></div>


<h4 id="feature-generation-for-a-single-image">Feature generation for a single image</h4>
<p>To generate encodings for a single image <em>encode_image</em> function can be used. The general api for 
using <em>encode_image</em> is:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span>
<span class="n">method_object</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">method</span><span class="o">-</span><span class="n">name</span><span class="o">&gt;</span><span class="p">()</span>
<span class="n">encoding</span> <span class="o">=</span> <span class="n">method_object</span><span class="o">.</span><span class="n">encode_image</span><span class="p">(</span><span class="n">image_file</span><span class="o">=</span><span class="s1">&#39;path/to/image/file&#39;</span><span class="p">)</span>
</pre></div>


<p>where the returned variable <em>encoding</em> is either a hexadecimal string if a hashing method is used or a (1, 1024) numpy 
array if cnn is used.</p>
<h5 id="options_2">Options</h5>
<ul>
<li>image_file: Optional, path to the image file for which encodings are to be generated.</li>
<li>image_array: Optional, used instead of <em>image_file</em> attribute. A numpy array representing the image.</li>
</ul>
<h5 id="considerations_3">Considerations</h5>
<p>If the image can't be loaded, no features are generated for the image and <em>None</em> is returned.</p>
<h5 id="examples_3">Examples</h5>
<p>Generating features using Difference hash,</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.methods</span> <span class="kn">import</span> <span class="n">DHash</span>
<span class="n">dhasher</span> <span class="o">=</span> <span class="n">DHash</span><span class="p">()</span>
<span class="n">encoding</span> <span class="o">=</span> <span class="n">dhasher</span><span class="o">.</span><span class="n">encode_image</span><span class="p">(</span><span class="n">image_file</span><span class="o">=</span><span class="s1">&#39;path/to/image/file&#39;</span><span class="p">)</span>
</pre></div>


<h3 id="evaluation-of-deduplication-quality">Evaluation of deduplication quality</h3>
<p>To determine the quality of deduplication algorithm and the corresponding threshold, an evaluation framework is provided.</p>
<p>Given a ground truth mapping consisting of file names and a list of duplicates for each file along with a retrieved 
mapping from the deduplication algorithm for the same files, the following metrics can be obtained using the framework:
- <a href="https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)#Mean_average_precision">Mean Average Precision</a> (MAP)
- <a href="https://en.wikipedia.org/wiki/Discounted_cumulative_gain">Mean Normalized Discounted Cumulative Gain</a> (NDCG)
- <a href="https://en.wikipedia.org/wiki/Jaccard_index">Jaccard Index</a>
- Per class <a href="https://en.wikipedia.org/wiki/Precision_and_recall">Precision</a> (class 0 = non-duplicate image pairs, class 1 = duplicate image pairs)
- Per class <a href="https://en.wikipedia.org/wiki/Precision_and_recall">Recall</a> (class 0 = non-duplicate image pairs, class 1 = duplicate image pairs)
- Per class <a href="https://en.wikipedia.org/wiki/F1_score">f1-score</a> (class 0 = non-duplicate image pairs, class 1 = duplicate image pairs)</p>
<p>The api for obtaining these metrics  is as below:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.evaluation</span> <span class="kn">import</span> <span class="n">evaluate</span>
<span class="n">metrics</span> <span class="o">=</span> <span class="n">evaluate</span><span class="p">(</span><span class="n">ground_truth_map</span><span class="p">,</span> <span class="n">retrieved_map</span><span class="p">,</span> <span class="n">metric</span><span class="o">=</span><span class="s1">&#39;&lt;metric-name&gt;&#39;</span><span class="p">)</span>
</pre></div>


<p>where the returned variable <em>metrics</em> is a dictionary containing the following content:</p>
<div class="codehilite"><pre><span></span><span class="err">{</span>
  <span class="s1">&#39;map&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="k">map</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;ndcg&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">mean</span> <span class="n">ndcg</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;jaccard&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">mean</span> <span class="n">jaccard</span> <span class="k">index</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;precision&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">numpy</span> <span class="nb">array</span> <span class="k">having</span> <span class="n">per</span> <span class="k">class</span> <span class="k">precision</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;recall&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">numpy</span> <span class="nb">array</span> <span class="k">having</span> <span class="n">per</span> <span class="k">class</span> <span class="n">recall</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;f1-score&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">numpy</span> <span class="nb">array</span> <span class="k">having</span> <span class="n">per</span> <span class="k">class</span> <span class="n">f1</span><span class="o">-</span><span class="n">score</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s1">&#39;support&#39;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">numpy</span> <span class="nb">array</span> <span class="k">having</span> <span class="n">per</span> <span class="k">class</span> <span class="n">support</span><span class="o">&gt;</span>
<span class="err">}</span>
</pre></div>


<h5 id="options_3">Options</h5>
<ul>
<li>ground_truth_map:  A dictionary representing ground truth with filenames as key and a list of duplicate filenames as 
value.</li>
<li>retrieved_map: A dictionary representing retrieved duplicates with filenames as key and a list of retrieved duplicate 
filenames as value.</li>
<li>metric can take one of the following values:</li>
<li>'map'</li>
<li>'ndcg'</li>
<li>'jaccard'</li>
<li>'classification': Returns per class precision, recall, f1-score, support</li>
<li>'all' (default, returns all the above metrics)</li>
</ul>
<h5 id="considerations_4">Considerations</h5>
<ul>
<li>
<p>Presently, the ground truth map should be prepared manually by the user. Symmetric relations between duplicates must 
be represented in the ground truth map. If an image <em>i</em> is a duplicate for image <em>j</em>, then <em>j</em> must also be represented as a
 duplicate of <em>i</em>. Absence of symmetric relations will lead to an exception.</p>
</li>
<li>
<p>Both the ground_truth_map and retrieved_map must have the same keys.</p>
</li>
</ul>
<h3 id="plotting-duplicates-of-an-image">Plotting duplicates of an image</h3>
<p>Once a duplicate dictionary corresponding to an image directory has been obtained (using <a href="#find_duplicates">find_duplicates</a>), duplicates 
for an image can be plotted using <em>plot_duplicates</em> method as below:</p>
<div class="codehilite"><pre><span></span><span class="kn">from</span> <span class="nn">imagededup.utils</span> <span class="kn">import</span> <span class="n">plot_duplicates</span>
<span class="n">plot_duplicates</span><span class="p">(</span><span class="n">image_dir</span><span class="p">,</span> <span class="n">duplicate_map</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
</pre></div>


<p>where <em>filename</em> is the file for which duplicates are to be plotted.</p>
<h5 id="options_4">Options</h5>
<ul>
<li>
<p><em>image_dir</em>: Directory where all image files are present.</p>
</li>
<li>
<p><em>duplicate_map</em>: A dictionary representing retrieved duplicates with filenames as key and a list of retrieved duplicate 
filenames as value. A duplicate_map with scores can also be passed (obtained from <a href="#find_duplicates">find_duplicates</a>
function with scores attribute set to True).</p>
</li>
<li>
<p><em>filename</em>: Image file name for which duplicates are to be plotted.</p>
</li>
<li>
<p><em>outfile</em>: Name of the file the plot should be saved to. <em>None</em> by default.</p>
</li>
</ul>
<p>The output looks as below:</p>
<p><img alt="figs" src="_readme_figures/plot_dups.png" /></p>
<h2 id="contribute">Contribute</h2>
<p>We welcome all kinds of contributions.
See the <a href="CONTRIBUTING/">Contribution</a> guide for more details.</p>
<h2 id="citation">Citation</h2>
<p>Please cite Imagededup in your publications if this is useful for your research. Here is an example BibTeX entry:</p>
<div class="codehilite"><pre><span></span><span class="nv">@misc</span><span class="err">{</span><span class="n">idealods2019imagededup</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">title</span><span class="o">=</span><span class="err">{</span><span class="n">Imagededup</span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">author</span><span class="o">=</span><span class="err">{</span><span class="n">Tanuj</span><span class="w"> </span><span class="n">Jain</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Christopher</span><span class="w"> </span><span class="n">Lennan</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">Zubin</span><span class="w"> </span><span class="n">John</span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="nf">year</span><span class="o">=</span><span class="err">{</span><span class="mi">2019</span><span class="err">}</span><span class="p">,</span><span class="w"></span>
<span class="w">  </span><span class="n">howpublished</span><span class="o">=</span><span class="err">{\</span><span class="n">url</span><span class="err">{</span><span class="nl">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">idealo</span><span class="o">/</span><span class="nc">image</span><span class="o">-</span><span class="n">dedup</span><span class="err">}}</span><span class="p">,</span><span class="w"></span>
<span class="err">}</span><span class="w"></span>
</pre></div>


<h2 id="maintainers">Maintainers</h2>
<ul>
<li>Tanuj Jain, github: <a href="https://github.com/tanujjain">tanujjain</a></li>
<li>Christopher Lennan, github: <a href="https://github.com/clennan">clennan</a></li>
</ul>
<h2 id="copyright">Copyright</h2>
<p>See <a href="LICENSE">LICENSE</a> for details.</p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
        
          <a href="evaluation/evaluation/" title="Evaluation" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Evaluation
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"."}})</script>
      
    
  </body>
</html>